<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
<head>
  <meta charset="utf-8">
  <title>Citron</title>
</head>
<body>
</body>
<script>
//-----------------------------------------------------------
var grillex = 8;
var grilley = 4;
var canvas_source = "";
var canvas_destination = "";
//-----------------------------------------------------------
createAllCartes();
displayAllCartes();
//-----------------------------------------------------------
//Declare the Carte prototype//
function Carte(x, y) {
  var Carte = document.createElement('canvas');
  Carte.ctx = Carte.getContext("2d");
  Carte.x = x;
  Carte.y = y;
  Carte.id = "carte" + x + "-" + y;
  Carte.width = 100;
  Carte.height = 150;
  Carte.style.zIndex = 8;
  Carte.style.position = "absolute";
  Carte.style.left = x * Carte.width;
  Carte.style.top = y * Carte.height;
  Carte.style.border = "1px solid grey";
  Carte.selected = false;
  Carte.cout = " ";
  Carte.attaque = " ";
  Carte.defense = " ";
  Carte.titre = "";
  Carte.description = "";
  Carte.imagej = new Image();
  Carte.onclick = function() {
    if (this.selected == false) {
      this.selected = true;
    }
    else {
      this.selected = false;
    }
  };
  Carte.clear = function() {
    this.ctx.clearRect(0, 0, this.width, this.height);
  };
  Carte.draw = function(img, vie, att, def, titre, desc) {
    carreCote = 12;
    this.ctx.beginPath();
    this.ctx.rect(0, 0, carreCote, carreCote);//haut gauche
    this.ctx.fillText(vie, 0, carreCote-2);
    this.ctx.fillText(titre, carreCote+2, carreCote-2);
    this.ctx.rect(this.width-carreCote, this.height-carreCote, carreCote, carreCote);//bas droite
    this.ctx.fillText(def, this.width-carreCote, this.height-2);
    this.ctx.rect(0, this.height-carreCote, carreCote, carreCote);// bas gauche
    this.ctx.fillText(att, 0, this.height-2);
    this.ctx.fillText(desc, carreCote/2, this.height-(carreCote+2));
    this.imagej.src = img;
    this.ctx.drawImage(this.imagej, carreCote+2, carreCote+2, this.width-2*(carreCote+2), this.height-3*(carreCote+2));
    this.ctx.stroke();
  };
  return Carte;
};
//-----------------------------------------------------------
function displayAllCartes() {
  for (i = 0; i < grillex; i++) {
    for (j = 0; j < grilley; j++) {
      canvas_txt = "carte" + i + "-" + j;
      canvas_tmp = document.getElementById(canvas_txt);
      canvas_tmp.clear();
      canvas_tmp.draw("darth-vader.jpg", "10", "10", "10", "01234567890123", "012345678901234");
    }
  }
}
//-----------------------------------------------------------
function createAllCartes() {
  for (i = 0; i < grillex; i++) {
    for (j = 0; j < grilley; j++) {
      var carteInstance = Carte(i, j);
      document.body.appendChild(carteInstance);
    }
  }
}
</script>
</html>
